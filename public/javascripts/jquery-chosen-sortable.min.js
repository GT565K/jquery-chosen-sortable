(function(a){var f;f=function(){var b=a(this),d=b.closest(".chzn-container").siblings("select"),g=a("option",d),c=d.clone(),e=b.closest(".chzn-container").find(".chzn-drop .chzn-results");$drop_results_clone=e.clone();c.children().not(":eq(0)").remove();$drop_results_clone.children().remove();var h=1;b.find('li[class!="search-field"]').each(function(){a(this).attr("id",d.attr("id")+"_chzn_c_"+h);g.filter(":contains("+a(this).text()+")").appendTo(c);h++});g.not(":selected").not(":eq(0)").each(function(){a(this).appendTo(c)});
d.replaceWith(c);c.find("option").each(function(){console.log(a(this).text())});console.log("---");c.find("option").not(":eq(0)").each(function(j){var i=e.find("li:contains("+a(this).text()+")");i.attr("id",d.attr("id")+"_chzn_o_"+(j+1));i.appendTo($drop_results_clone)});e.replaceWith($drop_results_clone);console.info("List sorted")};a.fn.chosenSortable=function(){$this=this.filter(".chzn-sortable");$this.each(function(){$select=a(this);$chosen=$select.siblings(".chzn-container");$chosen.find(".chzn-choices").bind("mousedown",
function(b){a(b.target).is("span")&&b.stopPropagation()});$chosen.find(".chzn-choices").sortable({placeholder:"ui-state-highlight",items:"li:not(.search-field)",update:f,tolerance:"pointer"})})}})(jQuery);
